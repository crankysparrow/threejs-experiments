var d=Object.defineProperty;var f=(c,e,s)=>e in c?d(c,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[e]=s;var i=(c,e,s)=>(f(c,typeof e!="symbol"?e+"":e,s),s);import{aJ as m,aK as p,p as b}from"./three.module-01fec873.js";import{O as u}from"./OrbitControls-1ea4caff.js";class w{constructor(){i(this,"callbacks");this.callbacks={},this.callbacks.base={}}on(e,s){return typeof e>"u"||e===""?(console.warn("wrong names"),!1):typeof s>"u"?(console.warn("wrong callback"),!1):(this.resolveNames(e).forEach(a=>{const t=this.resolveName(a);this.callbacks[t.namespace]instanceof Object||(this.callbacks[t.namespace]={}),this.callbacks[t.namespace][t.value]instanceof Array||(this.callbacks[t.namespace][t.value]=[]),this.callbacks[t.namespace][t.value].push(s)}),this)}off(e){return typeof e>"u"||e===""?(console.warn("wrong name"),!1):(this.resolveNames(e).forEach(n=>{const a=this.resolveName(n);if(a.namespace!=="base"&&a.value==="")delete this.callbacks[a.namespace];else if(a.namespace==="base")for(const t in this.callbacks)this.callbacks[t]instanceof Object&&this.callbacks[t][a.value]instanceof Array&&(delete this.callbacks[t][a.value],Object.keys(this.callbacks[t]).length===0&&delete this.callbacks[t]);else this.callbacks[a.namespace]instanceof Object&&this.callbacks[a.namespace][a.value]instanceof Array&&(delete this.callbacks[a.namespace][a.value],Object.keys(this.callbacks[a.namespace]).length===0&&delete this.callbacks[a.namespace])}),this)}trigger(e,s){if(typeof e>"u"||e==="")return console.warn("wrong name"),!1;let n,a=null;const t=s instanceof Array?s:[];let o=this.resolveNames(e),r=this.resolveName(o[0]);if(r.namespace==="base")for(const l in this.callbacks)this.callbacks[l]instanceof Object&&this.callbacks[l][r.value]instanceof Array&&this.callbacks[l][r.value].forEach(h=>{a=h.apply(this,t),typeof n>"u"&&(n=a)});else if(this.callbacks[r.namespace]instanceof Object){if(r.value==="")return console.warn("wrong name"),this;this.callbacks[r.namespace][r.value].forEach(l=>{a=l.apply(this,t),typeof n>"u"&&(n=a)})}return n}resolveNames(e){let s=e;return s=s.replace(/[^a-zA-Z0-9 ,/.]/g,""),s=s.replace(/[,/]+/g," "),s.split(" ")}resolveName(e){const s=e.split("."),n={original:e,value:s[0],namespace:"base"};return s.length>1&&s[1]!==""&&(n.namespace=s[1]),n}}class z extends w{constructor(){super();i(this,"width",window.innerWidth);i(this,"height",window.innerHeight);i(this,"pixelRatio",Math.min(window.devicePixelRatio,2));window.addEventListener("resize",()=>{this.width=window.innerWidth,this.height=window.innerHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2),this.trigger("resize")})}}class y{constructor(e){i(this,"scene");i(this,"renderer");i(this,"camera");i(this,"sizes");i(this,"controls");i(this,"onResize",()=>{this.camera.aspect=this.sizes.width/this.sizes.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.sizes.width,this.sizes.height),this.renderer.setPixelRatio(Math.min(this.sizes.pixelRatio,2))});i(this,"render",()=>{this.renderer.render(this.scene,this.camera),this.controls.update()});this.sizes=e,this.renderer=new m({antialias:!0}),this.renderer.setClearColor("#000"),document.body.appendChild(this.renderer.domElement),this.scene=new p,this.camera=new b(75,1,.1,300),this.controls=new u(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.onResize(),this.sizes.on("resize",this.onResize)}}export{w as E,z as S,y as W};
