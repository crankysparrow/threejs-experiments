import * as THREE from 'three'

export const dnaSideOnePositions = () => {
   const length = 40
   const positions = new Float32Array(length * 3)

   positions[0] = -5.770474
   positions[1] = -1.0
   positions[2] = -39.542488
   positions[3] = -5.535336
   positions[4] = -1.912699
   positions[5] = -37.542488
   positions[6] = -5.156837
   positions[7] = -2.775861
   positions[8] = -35.542488
   positions[9] = -4.644778
   positions[10] = -3.567129
   positions[11] = -33.542488
   positions[12] = -4.012421
   positions[13] = -4.26601
   positions[14] = -31.542488
   positions[15] = -3.276145
   positions[16] = -4.854404
   positions[17] = -29.542488
   positions[18] = -2.455019
   positions[19] = -5.317071
   positions[20] = -27.542488
   positions[21] = -1.570309
   positions[22] = -5.642029
   positions[23] = -25.542488
   positions[24] = -0.644928
   positions[25] = -5.820862
   positions[26] = -23.542488
   positions[27] = 0.297155
   positions[28] = -5.848938
   positions[29] = -21.542488
   positions[30] = 1.231542
   positions[31] = -5.725528
   positions[32] = -19.542488
   positions[33] = 2.134034
   positions[34] = -5.453831
   positions[35] = -17.542488
   positions[36] = 2.981255
   positions[37] = -5.040882
   positions[38] = -15.542488
   positions[39] = 3.751263
   positions[40] = -4.497377
   positions[41] = -13.542488
   positions[42] = 4.424115
   positions[43] = -3.837392
   positions[44] = -11.542488
   positions[45] = 4.982385
   positions[46] = -3.078021
   positions[47] = -9.542488
   positions[48] = 5.411613
   positions[49] = -2.238931
   positions[50] = -7.542488
   positions[51] = 5.700684
   positions[52] = -1.341854
   positions[53] = -5.542488
   positions[54] = 5.84211
   positions[55] = -0.410023
   positions[56] = -3.542488
   positions[57] = 5.832229
   positions[58] = 0.532427
   positions[59] = -1.542488
   positions[60] = 5.671296
   positions[61] = 1.461087
   positions[62] = 0.457512
   positions[63] = 5.363479
   positions[64] = 2.351906
   positions[65] = 2.457512
   positions[66] = 4.916751
   positions[67] = 3.181812
   positions[68] = 4.457512
   positions[69] = 4.342682
   positions[70] = 3.929311
   positions[71] = 6.457512
   positions[72] = 3.656138
   positions[73] = 4.575043
   positions[74] = 8.457512
   positions[75] = 2.874905
   positions[76] = 5.102283
   positions[77] = 10.457512
   positions[78] = 2.019211
   positions[79] = 5.497377
   positions[80] = 12.457512
   positions[81] = 1.111223
   positions[82] = 5.750092
   positions[83] = 14.457512
   positions[84] = 0.174452
   positions[85] = 5.853882
   positions[86] = 16.457512
   positions[87] = -0.766834
   positions[88] = 5.80606
   positions[89] = 18.457512
   positions[90] = -1.688263
   positions[91] = 5.607864
   positions[92] = 20.457512
   positions[93] = -2.565964
   positions[94] = 5.264428
   positions[95] = 22.457512
   positions[96] = -3.37721
   positions[97] = 4.784644
   positions[98] = 24.457512
   positions[99] = -4.100988
   positions[100] = 4.180941
   positions[101] = 26.457512
   positions[102] = -4.71855
   positions[103] = 3.468956
   positions[104] = 28.457512
   positions[105] = -5.213906
   positions[106] = 2.667124
   positions[107] = 30.457512
   positions[108] = -5.574224
   positions[109] = 1.796217
   positions[110] = 32.457512
   positions[111] = -5.790173
   positions[112] = 0.878787
   positions[113] = 34.457512
   positions[114] = -5.856159
   positions[115] = -0.061401
   positions[116] = 36.457512
   positions[117] = -5.770474
   positions[118] = -1.000001
   positions[119] = 38.457512

   return positions
}

export const dnaSideTwoPositions = () => {
   const length = 40
   const positions = new Float32Array(length * 3)

   positions[0] = 5.770474
   positions[1] = 1.000001
   positions[2] = 38.457512
   positions[3] = 5.856159
   positions[4] = 0.061401
   positions[5] = 36.457512
   positions[6] = 5.790173
   positions[7] = -0.878787
   positions[8] = 34.457512
   positions[9] = 5.574224
   positions[10] = -1.796217
   positions[11] = 32.457512
   positions[12] = 5.213906
   positions[13] = -2.667124
   positions[14] = 30.457512
   positions[15] = 4.71855
   positions[16] = -3.468956
   positions[17] = 28.457512
   positions[18] = 4.100988
   positions[19] = -4.180941
   positions[20] = 26.457512
   positions[21] = 3.37721
   positions[22] = -4.784644
   positions[23] = 24.457512
   positions[24] = 2.565964
   positions[25] = -5.264428
   positions[26] = 22.457512
   positions[27] = 1.688263
   positions[28] = -5.607864
   positions[29] = 20.457512
   positions[30] = 0.766834
   positions[31] = -5.80606
   positions[32] = 18.457512
   positions[33] = -0.174452
   positions[34] = -5.853882
   positions[35] = 16.457512
   positions[36] = -1.111223
   positions[37] = -5.750092
   positions[38] = 14.457512
   positions[39] = -2.019211
   positions[40] = -5.497377
   positions[41] = 12.457512
   positions[42] = -2.874905
   positions[43] = -5.102283
   positions[44] = 10.457512
   positions[45] = -3.656138
   positions[46] = -4.575043
   positions[47] = 8.457512
   positions[48] = -4.342682
   positions[49] = -3.929311
   positions[50] = 6.457512
   positions[51] = -4.916751
   positions[52] = -3.181812
   positions[53] = 4.457512
   positions[54] = -5.363479
   positions[55] = -2.351906
   positions[56] = 2.457512
   positions[57] = -5.671296
   positions[58] = -1.461087
   positions[59] = 0.457512
   positions[60] = -5.832229
   positions[61] = -0.532427
   positions[62] = -1.542488
   positions[63] = -5.84211
   positions[64] = 0.410023
   positions[65] = -3.542488
   positions[66] = -5.700684
   positions[67] = 1.341854
   positions[68] = -5.542488
   positions[69] = -5.411613
   positions[70] = 2.238931
   positions[71] = -7.542488
   positions[72] = -4.982385
   positions[73] = 3.078021
   positions[74] = -9.542488
   positions[75] = -4.424115
   positions[76] = 3.837392
   positions[77] = -11.542488
   positions[78] = -3.751263
   positions[79] = 4.497377
   positions[80] = -13.542488
   positions[81] = -2.981255
   positions[82] = 5.040882
   positions[83] = -15.542488
   positions[84] = -2.134034
   positions[85] = 5.453831
   positions[86] = -17.542488
   positions[87] = -1.231542
   positions[88] = 5.725528
   positions[89] = -19.542488
   positions[90] = -0.297155
   positions[91] = 5.848938
   positions[92] = -21.542488
   positions[93] = 0.644928
   positions[94] = 5.820862
   positions[95] = -23.542488
   positions[96] = 1.570309
   positions[97] = 5.642029
   positions[98] = -25.542488
   positions[99] = 2.455019
   positions[100] = 5.317071
   positions[101] = -27.542488
   positions[102] = 3.276145
   positions[103] = 4.854404
   positions[104] = -29.542488
   positions[105] = 4.012421
   positions[106] = 4.26601
   positions[107] = -31.542488
   positions[108] = 4.644778
   positions[109] = 3.567129
   positions[110] = -33.542488
   positions[111] = 5.156837
   positions[112] = 2.775861
   positions[113] = -35.542488
   positions[114] = 5.535336
   positions[115] = 1.912699
   positions[116] = -37.542488
   positions[117] = 5.770474
   positions[118] = 1.0
   positions[119] = -39.542488

   return positions
}

export const dnaMiddlePositions = (sideOne: Float32Array, sideTwo: Float32Array) => {
   const length = 13 * 2
   const positions = new Float32Array(length * 3)

   let currentIndex = 2
   for (let i = 0; i < 13; i++) {
      let x1 = sideOne[(currentIndex - 1) * 3 + 0]
      let y1 = sideOne[(currentIndex - 1) * 3 + 1]
      let z1 = sideOne[(currentIndex - 1) * 3 + 2]
      let x2 = sideTwo[sideTwo.length - currentIndex * 3 + 0]
      let y2 = sideTwo[sideTwo.length - currentIndex * 3 + 1]
      let z2 = sideTwo[sideTwo.length - currentIndex * 3 + 2]
      positions[i * 6 + 0] = x1
      positions[i * 6 + 1] = y1
      positions[i * 6 + 2] = z1
      positions[i * 6 + 3] = x2
      positions[i * 6 + 4] = y2
      positions[i * 6 + 5] = z2
      currentIndex += 3
   }
   return positions

   //    positions[0] = 5.750146
   //    positions[1] = -0.48415
   //    positions[2] = 37.446541
   //    positions[3] = -5.752552
   //    positions[4] = 0.454676
   //    positions[5] = 37.446541
   //    positions[6] = 4.866505
   //    positions[7] = -3.10092
   //    positions[8] = 31.446541
   //    positions[9] = -4.882333
   //    positions[10] = 3.075941
   //    positions[11] = 31.446541
   //    positions[12] = 2.868008
   //    positions[13] = -5.007305
   //    positions[14] = 25.446541
   //    positions[15] = -2.893631
   //    positions[16] = 4.992542
   //    positions[17] = 25.446541
   //    positions[18] = 0.212486
   //    positions[19] = -5.766579
   //    positions[20] = 19.446545
   //    positions[21] = -0.242034
   //    positions[22] = 5.765414
   //    positions[23] = 19.446545
   //    positions[24] = 2.491718
   //    positions[25] = 5.204799
   //    positions[26] = 13.446545
   //    positions[27] = -2.465012
   //    positions[28] = -5.217499
   //    positions[29] = 13.446545
   //    positions[30] = -4.625096
   //    positions[31] = -3.450663
   //    positions[32] = 7.446545
   //    positions[33] = 4.607352
   //    positions[34] = 3.474319
   //    positions[35] = 7.446545
   //    positions[36] = 5.698922
   //    positions[37] = 0.90602
   //    positions[38] = 1.446545
   //    positions[39] = -5.694204
   //    positions[40] = -0.935213
   //    positions[41] = 1.446545
   //    positions[42] = 5.467194
   //    positions[43] = -1.84618
   //    positions[44] = -4.553455
   //    positions[45] = -5.476583
   //    positions[46] = 1.818138
   //    positions[47] = -4.553455
   //    positions[48] = 3.982996
   //    positions[49] = -4.175444
   //    positions[50] = -10.553457
   //    positions[51] = -4.004341
   //    positions[52] = 4.154977
   //    positions[53] = -10.553457
   //    positions[54] = 1.586343
   //    positions[55] = -5.548162
   //    positions[56] = -16.553457
   //    positions[57] = -1.614754
   //    positions[58] = 5.539959
   //    positions[59] = -16.553457
   //    positions[60] = 1.173723
   //    positions[61] = 5.649864
   //    positions[62] = -22.553457
   //    positions[63] = -1.144754
   //    positions[64] = -5.655804
   //    positions[65] = -22.553457
   //    positions[66] = -3.664902
   //    positions[67] = -4.457249
   //    positions[68] = -28.553457
   //    positions[69] = 3.642012
   //    positions[70] = 4.475972
   //    positions[71] = -28.553457
   //    positions[72] = 5.316497
   //    positions[73] = 2.243534
   //    positions[74] = -34.553455
   //    positions[75] = -5.304929
   //    positions[76] = -2.27075
   //    positions[77] = -34.553455

   return positions
}

const lineMaterial = new THREE.LineBasicMaterial()

const sideOnePositions = dnaSideOnePositions()
const sideTwoPositions = dnaSideTwoPositions()
const middlePositions = dnaMiddlePositions(sideOnePositions, sideTwoPositions)

const lineOneGeometry = new THREE.BufferGeometry()
lineOneGeometry.setAttribute('position', new THREE.BufferAttribute(sideOnePositions, 3))
const lineOne = new THREE.Line(lineOneGeometry, lineMaterial)
// world.scene.add(lineOne)

const lineTwoGeometry = new THREE.BufferGeometry()
lineTwoGeometry.setAttribute('position', new THREE.BufferAttribute(sideTwoPositions, 3))
const lineTwo = new THREE.Line(lineTwoGeometry, lineMaterial)
// world.scene.add(lineTwo)

const middlesGeometry = new THREE.BufferGeometry()
middlesGeometry.setAttribute(
   'position',
   new THREE.BufferAttribute(dnaMiddlePositions(sideOnePositions, sideTwoPositions), 3)
)
const linesMiddle = new THREE.LineSegments(middlesGeometry, lineMaterial)
// world.scene.add(linesMiddle)

const points: THREE.Vector3[] = []
for (let i = 0; i < sideOnePositions.length / 3; i++) {
   points.push(
      new THREE.Vector3(
         sideOnePositions[i * 3],
         sideOnePositions[i * 3 + 1],
         sideOnePositions[i * 3 + 2]
      )
   )
   points.push(
      new THREE.Vector3(
         sideTwoPositions[i * 3],
         sideTwoPositions[i * 3 + 1],
         sideTwoPositions[i * 3 + 2]
      )
   )
}

const middleLinesCount = middlePositions.length / 3 / 2
for (let i = 0; i < middleLinesCount; i++) {
   let lineCurve = new THREE.CatmullRomCurve3([
      new THREE.Vector3(
         middlePositions[i * 6],
         middlePositions[i * 6 + 1],
         middlePositions[i * 6 + 2]
      ),
      new THREE.Vector3(
         middlePositions[i * 6 + 3],
         middlePositions[i * 6 + 4],
         middlePositions[i * 6 + 5]
      ),
   ])
   let linePoints = lineCurve.getPoints(10)
   // for (let j = 0; j < linePoints.length; j++) {
   //    points.push(linePoints[j])
   // }
}

const curve = new THREE.CatmullRomCurve3(points).getPoints(1000)
const curveGeometry = new THREE.BufferGeometry().setFromPoints(curve)
const curveLine = new THREE.Line(curveGeometry, lineMaterial)
// world.scene.add(curveLine)
